<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="NAS-媒体库管理工具">NAS 媒体库管理工具</h2><h3 id="简介">简介</h3><p>nas-tool 是一款 NAS 媒体库管理工具，需要结合 qbittorrent 和 Jellyfin 进行使用。</p><h3 id="使用方式">使用方式</h3><p>编写如下 <code>docker-compose.yaml</code> 文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3&#x27;</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">nas-tools:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">hsuyelin/nas-tools:latest</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">3000</span><span class="hljs-string">:3000</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./nas-config:/config</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./media:/media</span><br>    <span class="hljs-attr">environment:</span> <br>      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=3333</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=3333</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">UMASK=022</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">NASTOOL_AUTO_UPDATE=false</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">NASTOOL_CN_UPDATE=false</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">nas-tools</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nas-tools</span><br>  <span class="hljs-attr">qbittorrent-nox:</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">qbittorrent-nox</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=3333</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=3333</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">QBT_EULA=accept</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">QBT_VERSION=latest</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">QBT_WEBUI_PORT=8090</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=CST</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">UMASK=022</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">qbittorrentofficial/qbittorrent-nox:latest</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">6881</span><span class="hljs-string">:6881/tcp</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">6881</span><span class="hljs-string">:6881/udp</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">8090</span><span class="hljs-string">:8090/tcp</span><br>    <span class="hljs-attr">read_only:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">stop_grace_period:</span> <span class="hljs-string">30m</span><br>    <span class="hljs-attr">tmpfs:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/tmp</span><br>    <span class="hljs-attr">tty:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">qbittorrent</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./qbit-config:/config</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./media:/downloads</span><br>  <span class="hljs-attr">jellyfin:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">nyanmisaka/jellyfin:latest</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">jellyfin</span><br>    <span class="hljs-attr">user:</span> <span class="hljs-number">3333</span><span class="hljs-string">:3333</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./jellyfin/config:/config</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./jellyfin/cache:/cache</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./media/movies:/media/movies</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./media/tv:/media/tv</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">&#x27;unless-stopped&#x27;</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">8096</span><span class="hljs-string">:8096</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">jellyfin</span><br>  <span class="hljs-attr">jackett:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">lscr.io/linuxserver/jackett:latest</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">jackett</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=3333</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=3333</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">AUTO_UPDATE=true</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./jackett/data:/config</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./content/downloads:/downloads</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">9117</span><span class="hljs-string">:9117</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span><br></code></pre></td></tr></table></figure><blockquote><p>注：可以把 uid 和 gid 改为部署用户的对应值。</p></blockquote><p>之后就可以访问下列地址按照提示进行配置：</p><p><a href="http://localhost:8090">http://localhost:8090</a> 配置 qBittorrent-nox 下载器</p><p><a href="http://localhost:8096">http://localhost:8096</a> 配置 Jellyfin</p><p><a href="http://localhost:9117">http://localhost:9117</a> 配置 Jackett</p><p><a href="http://localhost:3000">http://localhost:3000</a> 配置 nas-tools 链接 Jellyfin, qBittorrent-nox(WEB-UI) 和 Jackett ，并且填入 TMDB API Key</p><h3 id="参考资料">参考资料</h3><p><a href="https://github.com/hsuyelin/nas-tools">项目地址</a></p>